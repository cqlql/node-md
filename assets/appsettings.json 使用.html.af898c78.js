import{_ as e}from"./_plugin-vue_export-helper.cdc0426e.js";import{o,a as i,e as n,f as a,c as t,b as p,r as c}from"./app.dda5d8ba.js";const l={},r=p(`<p>web.config \u5DF2\u7ECF\u8FC7\u65F6\uFF0C\u73B0\u5728\u63A8\u8350\u4F7F\u7528 appsettings.json</p><h2 id="webapi-\u9879\u76EE\u53EF\u5728\u5165\u53E3\u6587\u4EF6-program-cs-\u4E2D\u76F4\u63A5\u83B7\u53D6" tabindex="-1"><a class="header-anchor" href="#webapi-\u9879\u76EE\u53EF\u5728\u5165\u53E3\u6587\u4EF6-program-cs-\u4E2D\u76F4\u63A5\u83B7\u53D6" aria-hidden="true">#</a> webapi \u9879\u76EE\u53EF\u5728\u5165\u53E3\u6587\u4EF6 Program.cs \u4E2D\u76F4\u63A5\u83B7\u53D6</h2><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code>ConfigurationExtensions<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span>Configuration<span class="token punctuation">,</span> <span class="token string">&quot;UserManageDb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u901A\u8FC7-configurationbuilder-\u7C7B\u83B7\u53D6" tabindex="-1"><a class="header-anchor" href="#\u901A\u8FC7-configurationbuilder-\u7C7B\u83B7\u53D6" aria-hidden="true">#</a> \u901A\u8FC7 ConfigurationBuilder \u7C7B\u83B7\u53D6</h2><p>appsettings.json \u793A\u4F8B</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;ConnectionStrings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;MysqlDatabase&quot;</span><span class="token operator">:</span> <span class="token string">&quot;server=192.168.1.124;database=db_user;user=joly;password=123123&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5148\u5BFC\u5165\u76F8\u5173\u5305</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>dotnet <span class="token function">add</span> package Microsoft.Extensions.Configuration
dotnet <span class="token function">add</span> package Microsoft.Extensions.Configuration.FileExtensions
dotnet <span class="token function">add</span> package Microsoft.Extensions.Configuration.Json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u4EE3\u7801</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Configuration</span><span class="token punctuation">;</span>

<span class="token comment">// \u7528\u6307\u5B9A json \u6587\u4EF6\u521B\u5EFA ConfigurationBuilder \u5BF9\u8C61</span>
<span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ConfigurationBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// Microsoft.Extensions.Configuration.FileExtensions \u5305</span>
    <span class="token punctuation">.</span><span class="token function">SetBasePath</span><span class="token punctuation">(</span>Directory<span class="token punctuation">.</span><span class="token function">GetCurrentDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
    <span class="token comment">// Microsoft.Extensions.Configuration.Json \u5305</span>
    <span class="token punctuation">.</span><span class="token function">AddJsonFile</span><span class="token punctuation">(</span><span class="token string">&quot;appsettings.json&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">optional</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">reloadOnChange</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">IConfigurationRoot</span> configuration <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u83B7\u53D6\u8FDE\u63A5\u5B57\u7B26\u4E32</span>
<span class="token class-name"><span class="token keyword">var</span></span> connectionString <span class="token operator">=</span> ConfigurationExtensions<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> <span class="token string">&quot;MysqlDatabase&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>connectionString<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u53C2\u8003\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u6587\u6863" aria-hidden="true">#</a> \u53C2\u8003\u6587\u6863</h2>`,11),u={href:"https://learn.microsoft.com/zh-cn/iis-administration/configuration/appsettings.json",target:"_blank",rel:"noopener noreferrer"},d={href:"https://learn.microsoft.com/zh-cn/dotnet/api/microsoft.extensions.configuration.configurationextensions.getconnectionstring?view=dotnet-plat-ext-7.0",target:"_blank",rel:"noopener noreferrer"};function k(m,v){const s=c("ExternalLinkIcon");return o(),i("div",null,[r,n("p",null,[n("a",u,[a("Application Settings (appsettings.json)"),t(s)])]),n("p",null,[n("a",d,[a("ConfigurationExtensions.GetConnectionString(IConfiguration, String) \u65B9\u6CD5 "),t(s)])])])}const b=e(l,[["render",k],["__file","appsettings.json \u4F7F\u7528.html.vue"]]);export{b as default};
