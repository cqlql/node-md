import{_ as c}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as i,a as l,b as n,c as a,w as u,e as s,f as p,r as e}from"./app.53d34f8a.js";const r={},k=p(`<h2 id="\u5728-docker-\u73AF\u5883\u4E2D\u5B89\u88C5-mysql" tabindex="-1"><a class="header-anchor" href="#\u5728-docker-\u73AF\u5883\u4E2D\u5B89\u88C5-mysql" aria-hidden="true">#</a> \u5728 docker \u73AF\u5883\u4E2D\u5B89\u88C5 mysql</h2><p><a href="/MySql/00_docker%20%E7%8E%AF%E5%A2%83%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B">\u8BE6\u60C5\u79FB\u6B65</a></p><h2 id="\u521B\u5EFA\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u6A21\u578B" aria-hidden="true">#</a> \u521B\u5EFA\u6A21\u578B</h2><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">namespace</span> <span class="token namespace">AppConsole</span>
<span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Table</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// \u5F53\u8868\u540D\u4E0D\u4E00\u6837\u65F6</span>
  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span>
  <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Colum</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Id&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// \u5B57\u6BB5\u540D\u91CD\u65B0\u6620\u5C04</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span> <span class="token comment">// \u5B57\u6BB5\u5FC5\u987B</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">StringLength</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// \u5B57\u6BB5\u957F\u5EA6</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Colum</span><span class="token attribute-arguments"><span class="token punctuation">(</span>TypeName<span class="token operator">=</span><span class="token string">&quot;char&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// \u7C7B\u578B\u91CD\u65B0\u6620\u5C04</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> username <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> password <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> nickname <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u521B\u5EFA\u7EE7\u627F-dbcontext-\u7684\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u7EE7\u627F-dbcontext-\u7684\u7C7B" aria-hidden="true">#</a> \u521B\u5EFA\u7EE7\u627F DbContext \u7684\u7C7B</h2><p>\u8FD9\u4E2A\u7C7B\u5C06\u5BF9\u5E94\u4E00\u4E2A\u6570\u636E\u5E93\u3002</p>`,6),d={class:"custom-container info"},m=n("p",{class:"custom-container-title"},"\u5728\u65B0\u5EFA\u524D\uFF0C\u5148\u5B66\u4E60\u8FDE\u63A5\u5B57\u7B26\u4E32\u76F8\u5173\u77E5\u8BC6",-1),v=n("p",null,[n("strong",null,"\u8FDE\u63A5\u5B57\u7B26\u4E32"),s("\u4EE5\u540E\u53EF\u80FD\u4F1A\u4FEE\u6539\uFF0C\u6709\u65F6\u4E5F\u6D89\u53CA\u5230\u9700\u8981\u4FDD\u62A4\u7684\u654F\u611F\u4FE1\u606F\uFF0C\u6240\u4EE5\u4E00\u822C\u4E0D\u76F4\u63A5\u5B58\u653E\u5728\u6E90\u7801\u4E2D\uFF0C\u53EF\u4EE5\u5B58\u50A8\u5728 appsettings.json\u3001\u73AF\u5883\u53D8\u91CF\u3001\u7528\u6237\u673A\u5BC6\u5B58\u50A8\u6216\u5176\u4ED6\u914D\u7F6E\u6E90\u4E2D\u3002\u8FD9\u91CC\u6211\u5C31\u653E\u5728 appsettings.json \u4E2D\u3002")],-1),b={href:"https://learn.microsoft.com/zh-cn/ef/core/miscellaneous/connection-strings",target:"_blank",rel:"noopener noreferrer"},g=p(`<p>\u7EE7\u627F DbContext \u7684\u7C7B\u4EE3\u7801\u5982\u4E0B</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>EntityFrameworkCore</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">namespace</span> <span class="token namespace">AppConsole</span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserManage</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">DbContext</span></span>
  <span class="token punctuation">{</span>
    <span class="token comment">// \u5C06 User \u6620\u5C04\u5230\u8868</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DbSet<span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span> User  <span class="token operator">=&gt;</span> <span class="token generic-method"><span class="token function">Set</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnConfiguring</span><span class="token punctuation">(</span><span class="token class-name">DbContextOptionsBuilder</span> optionsBuilder<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// Program.configuration \u8BF4\u660E\uFF1A\u8FD9\u662F\u6839\u636E appsettings.json \u521B\u5EFA\u7684\u5BF9\u8C61\uFF0C\u5C06\u5728\u63A7\u5236\u53F0\u7A0B\u5E8F\u8FD0\u884C\u65F6\u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u5B9E\u73B0\u4EE3\u7801\u89C1\u4E0B\u9762\u7684\u63A7\u5236\u53F0\u7A0B\u5E8F\u5165\u53E3</span>
      <span class="token comment">// MysqlDatabase \u662F\u6570\u636E\u5E93\u540D</span>
      optionsBuilder<span class="token punctuation">.</span><span class="token function">UseMySQL</span><span class="token punctuation">(</span>ConfigurationExtensions<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span>Program<span class="token punctuation">.</span>configuration<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token string">&quot;MysqlDatabase&quot;</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u63A7\u5236\u53F0\u7A0B\u5E8F\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u63A7\u5236\u53F0\u7A0B\u5E8F\u4F7F\u7528" aria-hidden="true">#</a> \u63A7\u5236\u53F0\u7A0B\u5E8F\u4F7F\u7528</h2><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">namespace</span> <span class="token namespace">AppConsole</span>
<span class="token punctuation">{</span>
  <span class="token keyword">class</span> <span class="token class-name">Program</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">IConfigurationRoot<span class="token punctuation">?</span></span> configuration<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// \u7528\u6307\u5B9A json \u6587\u4EF6\u521B\u5EFA ConfigurationBuilder \u5BF9\u8C61</span>
      <span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ConfigurationBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token comment">// Microsoft.Extensions.Configuration.FileExtensions \u5305</span>
          <span class="token punctuation">.</span><span class="token function">SetBasePath</span><span class="token punctuation">(</span>Directory<span class="token punctuation">.</span><span class="token function">GetCurrentDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token comment">// Microsoft.Extensions.Configuration.Json \u5305</span>
          <span class="token punctuation">.</span><span class="token function">AddJsonFile</span><span class="token punctuation">(</span><span class="token string">&quot;appsettings.json&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">optional</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">reloadOnChange</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      configuration <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserManage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> item <span class="token keyword">in</span> db<span class="token punctuation">.</span>User<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
          Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u53C2\u8003\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u6587\u6863" aria-hidden="true">#</a> \u53C2\u8003\u6587\u6863</h2>`,5),y={href:"https://dev.mysql.com/doc/connector-net/en/connector-net-entityframework-core.html",target:"_blank",rel:"noopener noreferrer"};function h(f,w){const o=e("RouterLink"),t=e("ExternalLinkIcon");return i(),l("div",null,[k,n("div",d,[m,v,n("p",null,[a(o,{to:"/DotNet/appsettings.json%20%E4%BD%BF%E7%94%A8.html"},{default:u(()=>[s("appsettings.json \u7684\u4F7F\u7528\u6587\u6863")]),_:1})]),n("p",null,[n("a",b,[s("\u6570\u636E\u5E93\u8FDE\u63A5\u5B57\u7B26\u4E32\u7684\u66F4\u591A\u4FE1\u606F"),a(t)])])]),g,n("p",null,[n("a",y,[s("MySql.EntityFrameworkCore \u5305\u4F7F\u7528\u6587\u6863"),a(t)])])])}const C=c(r,[["render",h],["__file","01_mysql \u5FEB\u901F\u4F7F\u7528.html.vue"]]);export{C as default};
