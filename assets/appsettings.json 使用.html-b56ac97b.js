import{_ as e,Z as o,$ as i,a0 as n,a1 as a,Y as t,a2 as p,E as c}from"./framework-d33190a3.js";const l={},u=p(`<p>web.config 已经过时，现在推荐使用 appsettings.json</p><h2 id="webapi-项目可在入口文件-program-cs-中直接获取" tabindex="-1"><a class="header-anchor" href="#webapi-项目可在入口文件-program-cs-中直接获取" aria-hidden="true">#</a> webapi 项目可在入口文件 Program.cs 中直接获取</h2><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>ConfigurationExtensions<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span>Configuration<span class="token punctuation">,</span> <span class="token string">&quot;UserManageDb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="通过-configurationbuilder-类获取" tabindex="-1"><a class="header-anchor" href="#通过-configurationbuilder-类获取" aria-hidden="true">#</a> 通过 ConfigurationBuilder 类获取</h2><p>appsettings.json 示例</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;ConnectionStrings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;MysqlDatabase&quot;</span><span class="token operator">:</span> <span class="token string">&quot;server=192.168.1.124;database=db_user;user=joly;password=123123&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>先导入相关包</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>dotnet <span class="token function">add</span> package Microsoft.Extensions.Configuration
dotnet <span class="token function">add</span> package Microsoft.Extensions.Configuration.FileExtensions
dotnet <span class="token function">add</span> package Microsoft.Extensions.Configuration.Json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上代码</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Configuration</span><span class="token punctuation">;</span>

<span class="token comment">// 用指定 json 文件创建 ConfigurationBuilder 对象</span>
<span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ConfigurationBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// Microsoft.Extensions.Configuration.FileExtensions 包</span>
    <span class="token punctuation">.</span><span class="token function">SetBasePath</span><span class="token punctuation">(</span>Directory<span class="token punctuation">.</span><span class="token function">GetCurrentDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
    <span class="token comment">// Microsoft.Extensions.Configuration.Json 包</span>
    <span class="token punctuation">.</span><span class="token function">AddJsonFile</span><span class="token punctuation">(</span><span class="token string">&quot;appsettings.json&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">optional</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">reloadOnChange</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">IConfigurationRoot</span> configuration <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取连接字符串</span>
<span class="token class-name"><span class="token keyword">var</span></span> connectionString <span class="token operator">=</span> ConfigurationExtensions<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> <span class="token string">&quot;MysqlDatabase&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>connectionString<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考文档" tabindex="-1"><a class="header-anchor" href="#参考文档" aria-hidden="true">#</a> 参考文档</h2>`,11),r={href:"https://learn.microsoft.com/zh-cn/iis-administration/configuration/appsettings.json",target:"_blank",rel:"noopener noreferrer"},d={href:"https://learn.microsoft.com/zh-cn/dotnet/api/microsoft.extensions.configuration.configurationextensions.getconnectionstring?view=dotnet-plat-ext-7.0",target:"_blank",rel:"noopener noreferrer"};function k(v,g){const s=c("ExternalLinkIcon");return o(),i("div",null,[u,n("p",null,[n("a",r,[a("Application Settings (appsettings.json)"),t(s)])]),n("p",null,[n("a",d,[a("ConfigurationExtensions.GetConnectionString(IConfiguration, String) 方法 "),t(s)])])])}const f=e(l,[["render",k],["__file","appsettings.json 使用.html.vue"]]);export{f as default};
