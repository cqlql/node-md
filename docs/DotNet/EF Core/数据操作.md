## 增

```cs
[ApiController]
[Route("[controller]")]
[Produces("application/json")]
public class UserController : ControllerBase
{
  private readonly ILogger<UserController> _logger;
  private readonly UserManageDbContext _db;
  public UserController(UserManageDbContext db, ILogger<UserController> logger)
  {
    _db = db;
    _logger = logger;
  }

  // 增
  [HttpPost("Add")]
  public APIResult<object> Add(User user)
  {
    // mark product as added in change tracking
    _db.Add(user);
    // save tracked changes to database
    int affected = _db.SaveChanges();

    if (affected == 1)
    {
      return APIResult.Ok();
    }

    return APIResult.Error<object>("新增失败");
  }

  // 改
    [HttpPost("Update")]
  public APIResult<object> Update(User user)
  {
   // get first user whose name starts with name
        User updateUser = _db.User.First(
          p => p.ProductName.StartsWith(name));

    if (affected == 1)
    {
      return APIResult.Ok("修改成功");
    }

    return APIResult.Error<object>("修改失败");
  }

  // 删



}
```

## 改

直接使用完整的实例修改

```cs
[HttpPost("Update")]
public APIResult<object> Update(User user)
{
  _db.Update(user);

  // save tracked changes to database 
  int affected = _db.SaveChanges();

  if (affected == 1)
  {
    return APIResult.Ok("修改成功");
  }

  return APIResult.Error("修改失败");
}
```

修改指定的属性

```cs
[HttpPost("UpdatePassword")]
public APIResult<object> UpdatePassword(User user)
{
  SharpPad.Output.DumpBlocking(user);
  
  // get first user whose name starts with name
  User updateUser = _db.User!.First(u => u.id == user.id);
  updateUser.password = user.password;

  // save tracked changes to database 
  int affected = _db.SaveChanges();

  if (affected == 1)
  {
    return APIResult.Ok("修改成功");
  }

  return APIResult.Error("修改失败");
}
```

